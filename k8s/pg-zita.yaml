# CloudNativePG Cluster and secrets for ZITADEL
# Generated from: zitadel_k3d_stepca.md (section 4b)
---
apiVersion: v1
kind: Secret
metadata:
  name: pg-zita-app
  namespace: zitadel
  labels:
    app.kubernetes.io/part-of: local-k3d
    app.kubernetes.io/component: database
stringData:
  username: zitadel
  password: zitadelpw
---
apiVersion: v1
kind: Secret
metadata:
  name: pg-zita-su
  namespace: zitadel
  labels:
    app.kubernetes.io/part-of: local-k3d
    app.kubernetes.io/component: database
stringData:
  username: postgres
  password: superpw
---
apiVersion: postgresql.cnpg.io/v1
kind: Cluster
metadata:
  name: pg-zita
  namespace: zitadel
spec:
  instances: 1
  storage:
    size: 5Gi
  bootstrap:
    initdb:
      database: zitadel
      owner: zitadel
      secret:
        name: pg-zita-app
  enableSuperuserAccess: true
  superuserSecret:
    name: pg-zita-su
